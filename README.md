# The Machine

**The Machine** is an experimental, real-time survival simulation and engine-building game,\
developed as a Progressive Web App (PWA).\
The player manages a single abstract machine that continuously produces tokens, consumes energy,
and\
becomes increasingly energy-hungry as output rises and accumulates wear over time. The goal: survive
as long as possible before the system collapses.

---

## âš ï¸ Status

This project is **actively developed with multiple modules implemented**.\
Core systems (energy, wear, tick cycle, heat) are fully functional.\
UI layout and live updates are stable, with a dynamic modular system and evolving economy.

---

## ğŸ§° Current Features

- Real-time tick cycle with live updates
- Fully functional modular system with multiple modules:
  - **Vault** (increases token capacity, raises wear rate)
  - **Generator** (increases token production, generates heat)
  - **Battery** (increases energy capacity, affects energy cost scaling)
  - **Cooling** (reduces heat, consumes energy)
- Dynamic **energy**, **output**, **wear**, and **heat** meters
- Interactive **action buttons** with dynamic scaling based on module upgrades:
  - **Buy Energy** (cost scales with Battery, refills energy)
  - **Repair Wear** (cost scales with Vault, reduces wear)
- Automatic enable/disable logic based on current state and resource availability
- Visual icons via Material Symbols for consistent UI
- Heat system now functional, affecting wear accumulation

---

## ğŸ¯ Core Goal

**There is no winning state.** The machine is designed to collapse.\
Modules don't solve problems â€” they delay failure while creating new pressures.\
Your score is how long you can keep it running before the inevitable breakdown.

- Survive as long as possible â†’ **score = time survived**
- Keep the machine alive by:
  - Managing **energy** and its increasing cost
  - Managing **wear** and **heat** accumulation through repairs and strategic upgrades
  - Installing and upgrading **modules** to balance output and system stress

---

## ğŸ” Core Loop

The machine runs in continuous **ticks** â€” short real-time intervals that represent system cycles.

Each tick:

- Produces tokens (`+ğŸª™`) influenced by Generator modules
- Increases energy cost (`â†‘âš¡ cost`) influenced by Battery modules
- Accumulates wear (`+wear%`) amplified by heat and Vault modules
- Accumulates heat (`+heat`) generated by Generator and reduced by Cooling modules

The player can take actions (buy energy, repair wear, or upgrade modules) at any time â€”\
but time, wear, and heat accumulation never stop.\
When energy reaches **0** or wear hits **100%**, the machine fails.

---

## âš™ï¸ System Overview

All key systems are connected through one feedback loop:

```
Output â†‘ â†’ Token Capacity â†‘ (via Vault) â†’ Wear Rate â†‘ â†’ Collapse (at 100%)
                                    â†–----------- Repair â†“

Energy Cost Growth (via Battery modules)
Heat Generation (via Generator) â†’ Heat â†’ Wear Amplification
Cooling modules reduce Heat
```

- Output/actions generate heat.
- Heat builds from Generator modules and amplifies wear.
- Cooling modules reduce heat but consume energy.
- Wear is the primary collapse condition (at 100%). Energy 0 also fails.
- Energy cost growth scales with Battery modules, adding a time-based pressure.

---

## ğŸ”© Modules & Bays â€“ Building the Machine

The machine consists of multiple **bays** arranged in a fixed layout.\
All bays exist from the start and can be installed or upgraded by the player.

- **Fixed structure:** no random shop or rerolling. All potential modules are visible.
- **Start state:** basic energy, output, wear, and heat systems active.
- **Modules implemented:**
  - **Vault** â€“ increases token capacity but raises wear rate per level
  - **Battery** â€“ increases energy capacity and scales energy purchase cost
  - **Cooling** â€“ reduces heat but consumes additional energy
  - **Generator** â€“ increases token production and generates heat
- **Activation:** inactive bays can be installed anytime for a cost, adding their effects to the
  system.
- **Upgrading:** installed bays can be enhanced, increasing benefits and drawbacks.

---

## ğŸ’¥ Wear & Heat Dynamics

**Wear** accumulates each tick (base: 2%/tick) and is amplified by heat and module upgrades (e.g.
Vault).\
**Heat system** is now functional: generated by Generator modules and reduced by Cooling modules.\
Heat amplifies wear accumulation, increasing system stress.\
Overheating alone does not cause failure; only when wear reaches 100% does the system collapse.

---

## âš¡ Events & Market Dynamics (Planned)

Occasional events and market shifts add unpredictability to the system:

- **Energy price drift:** trends upward over time, with small fluctuations per tick.
- **Instability events:** temporary modifiers to tick speed, heat generation, or consumption.
- **Emergency actions:** one-time relief options (e.g., temporary battery injection).

Events are rare but impactful â€” designed to disrupt routines and force adaptive play.

---

## ğŸ§® Balancing (current values)

- Tick duration: **6 s**
- Base energy capacity: **10 âš¡**
- Base energy cost growth: **+0.02 âš¡/tick** (scales with Battery modules)
- Base wear growth: **2% per tick** (linear, constant rate)
- Repair cost: **5 ğŸª™ for -10% wear** (scales with Vault modules)
- Heat generation: from Generator modules (+ heat per level)
- Cooling effect: reduces heat by **20 heat per level** per tick
- Energy price: **3 ğŸª™ for +5 âš¡** (scales with Battery modules)
- Generator output bonus: **+3 ğŸª™/tick** per level
- Vault module:
  - Max Level: 3
  - Cost: 9 ğŸª™ initial, +9 ğŸª™ per level
  - Effect: +10 token capacity per level
  - Drawback: +1% wear/tick per level
- Battery module:
  - Increases energy capacity and scales energy purchase cost
- Cooling module:
  - Reduces heat but consumes energy

---

## ğŸ¨ Interface & Experience

- Minimal, abstract interface resembling a machine control panel.
- Each element of the machine â€” from stats to modules â€” appears as a **Bento card** within a unified
  grid.
- The entire layout acts as a single, dynamic dashboard where every tile represents part of the
  machineâ€™s system.
- Tiles can vary in size and purpose, depending on the information or interaction they represent.
- As the machine evolves, new tiles activate and fill the grid, making progress visually tangible.
- Visual and audio feedback communicate system stress (tick pulse, alerts, color shifts).
- Designed for clarity under pressure, adaptable to both mobile and desktop.
- Style: sleek, high-tech, industrial â€” no decorative illustrations.

---

## ğŸ® Controls

- **Buy Energy** â†’ costs 3ğŸª™ (scales with Battery), adds +5âš¡
- **Repair Wear** â†’ costs 5ğŸª™ (scales with Vault), reduces wear by -10%
- **Module Install/Upgrade** â†’ costs scale per module and level, with distinct effects:
  - Vault: increases token cap (+10), raises wear rate (+1%/tick)
  - Generator: increases token output (+3/tick), generates heat
  - Battery: increases energy capacity, scales energy purchase cost
  - Cooling: reduces heat (-20 heat per level), consumes energy
- Buttons disable automatically when insufficient tokens or caps/limits reached

---

## ğŸ“Œ Roadmap

- [x] UI prototype (modular tiles, HUD, live feedback)
- [x] Core state engine (energy, wear, tick cycle with cost growth)
- [x] Interactive action system (buttons, costs, enable/disable logic)
- [x] Wear system with visual hue shift
- [x] Heat system and heat-generating modules
- [x] Full bay/module system (Generator, Battery, Cooling, Vault)
- [x] Upgrade economy and secondary currency
- [ ] Event & market system
- [ ] Visual feedback: alerts, color shifts, animations
- [ ] Balancing iterations & playtest loops

---

## ğŸ“– License

TBD â€“ project is in an early stage.
